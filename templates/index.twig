{% extends "_layouts/site.twig" %}

{% block content %}
    <style>
        /* Set a background image by replacing the URL below */
        .homebg {
            background: url('{{ siteSettings.siteBackgroundImage[0].url }}') no-repeat center center ;
            background-size: cover;
            background-color: #999999;
            height:100%
        }
    </style>
<section class="homebg position-relative">
    <div class="home-overlay">
        <h1 class="center-me text-center">Ashley Luff</h1>
    </div>
    <div class="center-container text-center">
        <a href="#content"  class="btn scroll-down py-0">
            <i class="mdi mdi-48px mdi-chevron-double-down"></i>
        </a>
    </div>
</section>



<section class=" section" id="content"><a name="content"></a>
    <div class=" container">
        <div class="row">
                <div class="page-title">
                    <h1 class="">{{ entry.altTitle }}</h1>
            </div>
            <div class="row">
                <div class="col-lg-6">
                    {{ entry.body }}
                </div>
                <div class="col-lg-5 offset-1">
                    {% set imagesRight = entry.imagesRight %}
                    {% for image in imagesRight %}
{#                        {% set image = image[0] ?? null %}#}
{#                        {% set thumb = {#}
{#                            mode: 'crop',#}
{#                            width: auto,#}
{#                            height:auto,#}
{#                            quality: 85#}
{#                        } %}#}
                    <figure class="figure mb-5" >
                        <img class="img-fluid " alt="{{ image.title }}" src="{{ image.getUrl() }}">
                        <figcaption class="figure-caption" style="max-width: {{ image.getWidth() }}px">{{image.title}}</figcaption>
                    </figure>

                        {% endfor %}
                </div>

            </div>
        </div>

    </div>
    <div class="container border-top-orange my-3 p-0 ">
        <div class="d-flex justify-content-between align-items-center mt-4">
            {% set imagesRight = entry.imagesBottom %}
            {% for image in imagesRight %}

{#                                        {% set image = image[0] ?? null %}#}

                {% if loop.index == 2 %}
                    {% set thumb = {
                        mode: 'fit',
                        width: 250 ,
                        height:690,
                        quality: 85
                    } %}
                <figure class="figure" >
                    <img src="{{ image.getUrl(thumb) }}" >
                    <figcaption class="figure-caption" style="max-width: {{ image.getWidth(thumb) }}px">{{image.title}}</figcaption>

                </figure>

                {% else %}
                        {% set thumb = {
                            mode: 'fit',
                            width: 200 ,
                            height:300,
                            quality: 85
                        } %}
                    <figure class="figure">
                        <img src="{{ image.getUrl(thumb) }}" >
                        <figcaption class="figure-caption" style="max-width: {{ image.getWidth(thumb) }}px">{{image.title}}</figcaption>
                    </figure>
                {% endif %}

            {% endfor %}
        </div>
    </div>
    <div class="container">

        <!-- SECTION FILTER
        ================================================== -->

        {% set entries = craft.entries({
        section:'gallery',
        with:['image']
        }).limit(null).all()
        %}
        {% set categoriesGroup = craft.categories.group('gallery').relatedTo(entries).orderBy('RAND()') %}

        {# Fetch the categories #}
        {% set category = categoriesGroup.one() %}


        <div class="row mt-5 mb-2">
            <div class="col-lg-12">
                <div class="text-center margin-t-30">
                    <h2><span>Featured work</h2>
                </div>
            </div>
        </div>

        <div class="port portfolio-masonry m-b-30">
            <div class="portfolioContainer row"  id="lightgal">
                {% set entries = craft.entries({
                section:'gallery',
                    with:['image'],
                relatedTo: [category]
                }).limit('3').all()
                %}
                {#{% set entries = craft.entries()#}
                {#.section('gallery')#}
                {#.with(['image']).featureContent('1')#}
                {#.all() %}#}

                {% for entry in entries %}
                    {% set image = entry.image[0] ?? null %}
                    {% if image %}
                        {% set thumb = {
                        mode: 'crop',
                        width: 350,
                            height:350,
                        quality: 85
                        } %}

                        {% set tags = entry.MediumUsed %}
                    <div class="col-lg-4 natural {{ entry.category.one().slug }}">
                        {#<a href="work-detail.html">#}
                            <div class="portfolio-box">
                                <div class="portfolio-box-img" data-src="{{ image.getUrl() }}">
                                    {# Get the eager-loaded asset, if there is one #}

                                        {#<img src="{{ image.url }}" class="img-fluid" alt="member-image">#}
                                        <img class="img-fluid" alt="{{ entry.title }} - {% for tag in tags.all() %}{{ tag }}{% endfor %} - width: {{ entry.width }}cm, height: {{ entry.height }}cm" title="{{ entry.title }}"
                                             src="{{ image.getUrl(thumb) }}">

                                    {% endif %}
                                </div>
                                <div class="portfolio-box-detail">
                                    <h4>{{ entry.title }}</h4>
                                    <div class="d-flex align-items-center">

                                        <p class="align-self-center mdi mdi-24px mdi-palette"></p>
                                        {% for tag in tags.all() %}
                                            <p class="px-1">{{ tag }}</p>
                                        {% endfor %}
                                            <p class="ml-3 justify-content-end mdi mdi-24px mdi-image-multiple mr-1"></p>
                                            <p class="justify-content-end"> w: {{ entry.width }}cm  h: {{ entry.height }}cm</p>
                                        </div>


                                </div>
                            </div>
                        {#</a>#}
                    </div>
                {% endfor %}

            </div><!-- end portfoliocontainer-->


        </div> <!-- End row -->
        <div class="row">
            <div class="col-lg-12">
                <div class="text-center margin-t-30">
                    <a href="{{ baseUrl }}/gallery" class="btn btn-dark btn-rounded">More works</a>
                </div>
            </div>
        </div>

    </div> <!-- end container -->
</section>

{% endblock %}
